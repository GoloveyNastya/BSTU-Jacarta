<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />
    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./index.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,100;0,200;0,300;0,400;0,500;0,700;1,400&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Forum:wght@400&display=swap"
    />
  </head>
  <body>
    <div class="laptop" id="second">
        <div class="headbg">
            <b class="b"
              >Мы рады приветствовать вас в нашем цветочном магазине Здесь вы можете
              сделать заказ, чтобы порадовать свою вторую половинку</b
            >
            <nav class="menu">
              <input id="menu-toggle" type="checkbox">
              <label class="menu-btn" for="menu-toggle">
                <span></span>
              </label>
              <ul class="menu__box">
                <li><a class="menu__item" href="cart.html">SERVICES</a></li>
                <li><a class="menu__item" href="index.html">Цены</a></li>
                <li><a class="menu__item" href="index.html">Контакты</a></li>
                <li><a class="menu__item" href="index.html">Цены</a></li>
              </ul>
            </nav>
            <div class="links">
              <a href="cart.html">
              <div class="about-us">
                <div class="about-us-child"></div>
                <b class="services">SERVICES</b>
              </div>
              </a>
              <a href="index.html">
              <div class="contacts" id="contactsContainer">
                <img
                  class="contacts-child"
                  alt=""
                  src="./assets/svg/rectangle-21.svg"
                />
    
                <b class="contacts1">CONTACTS</b>
              </div>
              </a>
              <a href="index.html">
              <div class="showcase" id="showcaseContainer">
                <img
                  class="showcase-child"
                  alt=""
                  src="./assets/svg/rectangle-22.svg"
                />
    
                <b class="showcase1">SHOWCASE</b>
              </div>
              </a>
              <a href="index.html">
              <button class="price" id="price">
                <img
                  class="showcase-child"
                  alt=""
                  src="./assets/svg/rectangle-22.svg"
                />
    
                <b class="price1">PRICE</b>
              </button>
                </a>
            </div>
            <div class="logo">
              <img class="logo-child" alt="" src="./assets/svg/rectangle-6.svg" />
    
              <div class="jardan">JARDAN</div>
              <img class="logo-icon" alt="" src="./assets/png/logo@2x.png" />
            </div>
          </div>
          <div class="cart">
            <h1>Корзина</h1>
            <form>
              <label for="products">Выберите услуги:</label>
              <select id="products">
                <option value="">--Выберите услуги--</option>
                <option value="Свадебная флористика" data-price="30">Свадебная флористика</option>
                <option value="Оформление букета" data-price="40">Оформление букета</option>
                <option value="Открытки/Бирки" data-price="60">Открытки/Бирки</option>
              </select>
              <label for="quantity">Количество:</label>
              <input type="number" id="quantity" min="1" max="10">
              <button type="button" id="add-to-cart">Добавить в корзину</button>
            </form>
            <ul id="cart"></ul>
            <p id="total"></p>
            <button onclick="finish()">Оформить заказ</button>
            <script>
                // Находим элементы HTML:
                const productsSelect = document.getElementById('products');
                const quantityInput = document.getElementById('quantity');
                const addToCartButton = document.getElementById('add-to-cart');
                const cartList = document.getElementById('cart');
                const total = document.getElementById('total');

                // Объявляем объект корзины:
                const cart = {
                items: [],
                
                // Метод для добавления товара в корзину:
                addItem(item) {
                    this.items.push(item);
                },
                
                // Метод для подсчета общей стоимости товаров в корзине:
                getTotal() {
                    return this.items.reduce((total, item) => {
                    return total + (item.price * item.quantity);
                    }, 0);
                },
                
                // Метод для отображения корзины:
                render() {
                    cartList.innerHTML = '';
                    this.items.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = `${item.quantity} x ${item.product} - ${item.price * item.quantity} руб.`;
                    cartList.appendChild(li);
                    });
                    
                    total.textContent = `Общая стоимость: ${this.getTotal()} руб.`;
                }
                };

                // Обработчик события клика на кнопку "Добавить в корзину":
                addToCartButton.addEventListener('click', () => {
                const product = productsSelect.value;
                const quantity = quantityInput.value;
                
                if (product && quantity) {
                    const price = parseFloat(productsSelect.options[productsSelect.selectedIndex].getAttribute('data-price'));
                    
                    // Создаем объект товара и добавляем его в корзину:
                    const item = { product, quantity, price };
                    cart.addItem(item);
                    
                    // Отображаем корзину:
                    cart.render();
                    
                    // Очищаем поля выбора товара и ввода количества:
                    productsSelect.value = '';
                    quantityInput.value = '';
                }
                });
            function finish(){
                alert('Заказ успешно выполнен!');
                location.reload();
            }
            </script>
    </div>
</body>